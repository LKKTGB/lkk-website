{% load staticfiles %}

<header class="header
    {% if home %}
        header-home
    {% endif %}">
    <div class="row nav mx-0 px-0">
        <div class="col-12 px-0
            {% if home %}
                col-xl-4 offset-xl-4
            {% else %}
                col-md-6
            {% endif %}">
            <div class="row mx-0">
                <a href="{% url 'home' %}">
                    <img class="header-brand mt-3 mr-3 mb-0" src="{% static 'img/logo.jpg' %}" alt="">
                </a>
                <div class="col px-0
                    {% if home %}
                        text-center
                    {% endif %}">
                    <a href="{% url 'home' %}">
                        <h1 class="header-title text-dark">
                            {% if page_title %}
                                {{ page_title }}
                            {% else %}
                                李江却台語文教基金會
                            {% endif %}
                        </h1>
                    </a>
                </div>
            </div>
        </div>
        <div class="col mt-3 px-0">
            <div class="row
                {% if home %}
                    justify-content-center
                {% else %}
                    justify-content-md-start
                {% endif %}
                justify-content-xl-end">
                {% if search %}
                    <form class="form-inline">
                        <input class="form-control mx-2 col-8" type="search" placeholder="{{ search.placeholder }}" aria-label="Search">
                        <button class="btn btn-outline-dark" type="submit">搜尋</button>
                    </form>
                {% endif %}
                {% if user.is_authenticated %}
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle text-dark px-0 py-0" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
                            <img class="rounded-circle float-right avatar" src={{ user.profile.avatar_url }}>
                        </a>
                        <div class="dropdown-menu dropdown-menu-right">
                            {%  if user.is_staff or user.is_superuser %}
                                <a class="dropdown-item" href="{% url 'admin:index' %}">管理後台</a>
                                <div class="dropdown-divider"></div>
                            {% endif %}
                            <a class="dropdown-item" href="{% url 'logout' %}?next={{ request.path }}">登出</a>
                        </div>
                    </li>
                {% else %}
                    <a class="btn btn-outline-dark" role="button" href="{% url 'social:begin' 'facebook' %}?next={{ request.path }}">登入／註冊</a>
                {% endif %}
            </div>
        </div>
    </div>
    <nav class="navbar navbar-expand-sm navbar-light px-0">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto
                {% if home %}
                    mx-auto
                {% endif %}">
                {% for nav_item in nav_items  %}
                    {% if nav_item.current %}
                        <li class="nav-item active">
                    {% else %}
                        <li class="nav-item">
                    {% endif %}
                        <a class="nav-link p-0
                            {% if home %}
                                mx-3
                            {% else %}
                                ml-0 mr-4
                            {% endif %}" href="{{ nav_item.link }}">{{ nav_item.name }}</a>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </nav>
</header>
